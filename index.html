<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sandbox de Control Dinámico</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Sandbox de Control Dinámico</h1>
    <p>Usa las <strong>flechas ◀ (frenar) y ▶ (acelerar)</strong>. El objetivo es detener el coche sobre la <strong>línea de meta azul</strong>.</p>
    
    <div class="main-container">
        <div id="game-canvas-container">
            <!-- El canvas del juego se insertará aquí -->
            <div id="results-log" class="hidden">
                <h4>Registro de Intentos</h4>
                <ul id="log-list"></ul>
            </div>
        </div>
        
        <div class="controls-container">
            <h3>Panel de Control del Vehículo</h3>
            
            <label for="system-type">Tipo de Dinámica del Acelerador:</label>
            <select id="system-type">
                <option value="first-order">1er Orden</option>
                <option value="second-order">2º Orden Subamortiguado</option>
            </select>

            <div id="first-order-params">
                <label for="tau-slider">Constante de Tiempo (τ): <span id="tau-value">1.0</span>s</label>
                <input type="range" id="tau-slider" min="0.2" max="3" value="1" step="0.1">
            </div>

            <div id="second-order-params" class="hidden">
                <label for="os-slider">Sobreimpulso (%OS): <span id="os-value">20</span>%</label>
                <input type="range" id="os-slider" min="1" max="70" value="20" step="1">
                
                <label for="ts-slider">Tiempo de Establecimiento (Ts): <span id="ts-value">2.0</span>s</label>
                <input type="range" id="ts-slider" min="0.5" max="5" value="2" step="0.1">
            </div>

            <div class="nmp-toggle">
                <input type="checkbox" id="nmp-checkbox">
                <label for="nmp-checkbox">Añadir Cero de Fase No Mínima (Respuesta Inversa)</label>
            </div>
            
            <label for="sensitivity-slider">Sensibilidad del Acelerador: <span id="sensitivity-value">20</span></label>
            <input type="range" id="sensitivity-slider" min="5" max="100" value="20" step="1">
            
            <button id="reset-button">Reiniciar Simulación</button>
        </div>
    </div>
    
    <div class="charts-wrapper">
        <div class="chart-container">
            <h4>Respuesta Transitoria (Ventana de 5τ)</h4>
            <canvas id="transient-chart"></canvas>
        </div>
        <div class="chart-container">
            <h4>Historial Completo de Velocidad</h4>
            <canvas id="historical-chart"></canvas>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.1/lib/p5.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="sketch.js"></script>
</body>
</html>
